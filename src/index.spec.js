const expect = require("unexpected")
  .clone()
  .use(require("unexpected-snapshot"));

const chanceCache = require("chance-generators/lib/chanceCache");

const { html, htmlString } = require("./index");

describe("html", () => {
  beforeEach(() => {
    chanceCache.clear();
  });

  it("generates random HTML trees", () => {
    expect(html.first(), "to equal snapshot", {
      type: "tag",
      tag: "html",
      attributes: { hidden: "", lang: "25SSlGlheH#ySk0Wbe)" },
      children: [
        {
          type: "tag",
          tag: "head",
          attributes: { contenteditable: "false" },
          children: [
            {
              type: "tag",
              tag: "title",
              attributes: { dir: "rtl" },
              children: []
            }
          ]
        },
        {
          type: "tag",
          tag: "body",
          attributes: { draggable: "true" },
          children: [
            {
              type: "tag",
              tag: "keygen",
              children: [],
              attributes: { contenteditable: "" }
            }
          ]
        }
      ]
    });
  });
});

describe("htmlString", () => {
  beforeEach(() => {
    chanceCache.clear();
  });

  it("generates random HTML strings", () => {
    expect(htmlString.take(5), "to equal snapshot", [
      '<html hidden="" lang="25SSlGlheH#ySk0Wbe)"><head contenteditable="false"><title dir="rtl"></title></head><body draggable="true"><keygen contenteditable=""></keygen></body></html>',
      '<html tabindex="-233" lang="T"><head draggable="true"><title tabindex="809"></title><style contenteditable=""><pre dir="ltr"><embed hidden="" src="Qnc)!" title="D%&amp;S1&amp;ygQ"></embed></pre><object contenteditable="false"><aside dir="rtl"><var contenteditable="false"></var><map dir="ltr"></map>Gor zoclodevo.<canvas dir="ltr"></canvas></aside></object><select hidden=""><optgroup dir="auto"><script defer=""></script><script defer=""></script><option disabled=""></option></optgroup><script contenteditable="true"><h1 draggable="true"></h1><img decoding="auto" src="SEN"></img><embed dir="auto" src="vZ" title="U7vUh#H7qnE%$Ny7j%"></embed><svg tabindex="-272"></svg></script><script contenteditable="false"><meta draggable="true"></meta><canvas dir="auto"></canvas></script><script hidden=""><link dir="rtl" href="DAe)s)ssZK0w"></link></script></select><canvas tabindex="-267"><img tabindex="-986" src="Xf4Br"></img><audio tabindex="-470"><meter draggable="true"></meter><article contenteditable="false"></article><section dir="rtl"></section><keygen contenteditable="false"></keygen><area draggable="true"></area></audio><textarea spellcheck="false"></textarea>Dewire guz regduw ipaje ewumovecu iro.Du bedri tugohi ze erosi.</canvas></style><base draggable="true"></base><base dir="ltr"></base><title draggable="false"></title></head><body draggable="false"><span draggable="true"><q dir="auto"><a dir="rtl">Liov sactolag ihera.</a><i hidden="">Tuc pogoc abijasa vahfi enbebah demzef.<kbd hidden=""></kbd></i><video preload=""><meter hidden=""></meter></video><video contenteditable="false"><i tabindex="-836"></i><ins draggable="true"></ins><keygen contenteditable="true"></keygen>Dof jozwom wibse.Bedabe waldoal.</video>Mo tuibe tupum foctub.</q>Otilip am tettufja la to veer ag.<label draggable="true"><progress contenteditable="true"><object data="rFY323rhB%NL"></object><input tabindex="-896" type="image"></input><datalist contenteditable="false"></datalist><i contenteditable="true"></i></progress><area shape="poly"></area><strong draggable="false">Rozu adapucrak rerudzup.Cir mu famhuluj huwsojwa lirhu mi mi.</strong>Dod zorhukne rek buzbewru cemucite.</label></span><h4 dir="rtl"><output hidden="">Selu nob kisog ic.<label tabindex="417"><ins contenteditable="true"></ins><template tabindex="-988"></template><area hidden=""></area></label></output><select hidden=""><template draggable="false"></template><template contenteditable="true"></template></select><dfn contenteditable=""></dfn><audio tabindex="534"><noscript draggable="true"></noscript><script src="pq#X4T">Zukut ravmid motor idbujsok.<object draggable="true"></object></script><sup dir="rtl"><textarea wrap="soft"></textarea>Pognatij ti ci di.<sup draggable="true"></sup></sup>We iliufo bu je di.</audio><label draggable="true"><iframe dir="ltr" title="J"></iframe><embed hidden="" src="&amp;Beau#7g3Sn[pNB&amp;Jr" title="NI13ecksj0Y%!L3"></embed></label></h4><ruby contenteditable="false"><rb dir="ltr"><cite draggable="true">Sisis raje tonli subafe.<bdo draggable="true"></bdo><i contenteditable=""></i><s contenteditable="false"></s><q contenteditable="true"></q></cite></rb><rp hidden="">Orisihzef wipora zecpawki lefi ufe dedbodnin.<object tabindex="-106"><video tabindex="575"></video>Ase adagtiw invu wenoh ninlu riig.<wbr draggable="true"></wbr>Tovaav rosoz kog fafwolzec.<audio hidden=""></audio></object><svg tabindex="-127"><select draggable="true"></select><audio tabindex="-641"></audio></svg><video hidden=""><iframe draggable="true" title="Tl^RkL"></iframe>Inu oro wozisa.<iframe contenteditable="false" title="!&amp;"></iframe>Ud dukuhhin.</video><canvas dir="ltr">Kijwuse id si bu zi haf guzfi.<a tabindex="-535"></a><bdo dir="rtl"></bdo><meter dir="auto"></meter></canvas></rp></ruby><textarea required=""></textarea>Go nu cesnim piro.</body></html>',
      '<html contenteditable="" lang="f(3Buu%"><head tabindex="-840"><title hidden=""></title><noscript draggable="true"><title tabindex="557"></title><script integrity="1S@79"><style dir="ltr"><audio hidden=""></audio>Itokelen ep zinu oz.<aside hidden=""></aside><article tabindex="487"></article><canvas hidden=""></canvas></style><embed draggable="true" src="2OZUDtqkV9F" title="%m"></embed></script></noscript><base hidden=""></base><link integrity="i8QKuePDWK91phakkt%" href="SsSUXKmQ^!EDC5MFdA"></link><link crossorigin="" href="S5"></link></head><body dir="auto"><iframe tabindex="297" title="JDX(*j2Jptc"></iframe></body></html>',
      '<html draggable="false" lang="K"><head hidden=""><title contenteditable="true"></title><base draggable="false"></base></head><body draggable="true">Uga leaw aznifru wotvoreze teububar ufinuh.<article contenteditable="false">Nem bonhipa rekmanam vespuk hibiz if owcub.Dib tijuk merohac jejog.<u contenteditable=""></u><script src="i">Diuvoni ufocekepe pagge gu lucufuonu hezir.<u contenteditable="false">Ik di ovbuhomo me hocim har uvpupi.Korsugimo hudfojhow togavuvi aba hofatesi ge kun.<abbr contenteditable=""></abbr><object contenteditable="true"></object></u></script></article></body></html>',
      '<html contenteditable="" lang="bOF)!"><head hidden=""><title tabindex="-688"></title></head><body dir="ltr"><article tabindex="991"><script nomodule=""><h3 hidden="">Nu difitvef zovaez biowituk.</h3></script>Uh isze ep runifaf zanumbot bu.<h4 tabindex="185">Mihico jimez bive unjor otuwidag.<bdo tabindex="142"><code contenteditable="false"></code><noscript draggable="false"></noscript></bdo></h4>Bule un vut fo tar sucomwu wotkotco.</article><map draggable="false"><nav contenteditable="false"><article contenteditable="true">Bop um tamoci hu.<img dir="auto" src="E2!FUz2B4]LcO#MQRGc1"></img><cite hidden=""></cite><hr tabindex="422"></hr>Jujlotu fomunte pakcik.</article>Min lonfo ukep.</nav><input tabindex="774" type="color"></input>Neicfe kofil tur la.</map><h1 contenteditable="true"><meter dir="rtl"></meter><sup dir="auto"></sup><keygen draggable="true"></keygen><svg contenteditable=""><embed contenteditable="true" src="YkD]J)Yab(xV" title="HsMMKzXNkjcjwk0*o2"></embed><button type="submit"></button><base hidden=""></base></svg></h1>Ezho uzebig.</body></html>'
    ]);
  });

  describe("when given a tag", () => {
    it("generates HTML strings starting with that tag", () => {
      expect(htmlString({ tag: "form" }).take(5), "to equal snapshot", [
        '<form method="post"><noscript contenteditable="true"></noscript></form>',
        '<form contenteditable="true"><br contenteditable="true"></br><abbr hidden=""><abbr dir="auto"><b draggable="false">Unukaho va.<s draggable="false"></s><audio preload="none"><slot draggable="false"></slot></audio></b><cite draggable="true"></cite></abbr><picture tabindex="450"><template hidden=""><h1 dir="rtl"><video contenteditable="false"></video><meter dir="ltr"></meter>Gor zoclodevo.<canvas dir="ltr"></canvas></h1><button draggable="false" type="submit"><q hidden=""></q><noscript hidden=""></noscript><bdo hidden=""></bdo></button><a contenteditable="true"><h1 draggable="true"></h1><img decoding="auto" src="SEN"></img><embed dir="auto" src="vZ" title="U7vUh#H7qnE%$Ny7j%"></embed><svg tabindex="-272"></svg></a><meta contenteditable="false"></meta><aside tabindex="-6"><ins contenteditable=""></ins><bdo draggable="false"></bdo><dfn contenteditable="false"></dfn></aside></template><template dir="ltr"><object draggable="true"></object><h1 dir="auto"><br hidden=""></br><keygen hidden=""></keygen><datalist dir="ltr"></datalist></h1><area draggable="true"></area><video preload="metadata"><object contenteditable=""></object><picture hidden=""></picture></video></template></picture>Vewi logumem fojdewire guz regduw ipaje ewumovecu.</abbr><s hidden=""><object tabindex="-652"><a draggable="true"><p hidden=""><meter dir="rtl"></meter><img hidden="" src="^UG6zLVQXK"></img>Pen taf nuhijoow.</p></a></object><bdi draggable="false"><video hidden=""><s dir="rtl"><button autofocus="" type="reset"></button><em dir="auto"></em><select draggable="false"></select><button contenteditable="true" type="submit"></button></s><b hidden="">Cuvbe nibel uhu bebah demzef navgiro.</b></video>Fuz katji cebuc wocafig dof.<input type="file"></input><del tabindex="738"><select multiple=""></select>Dabe waldoal.<iframe dir="rtl" title="DdT(U$dtB"></iframe></del><canvas draggable="false"><s hidden=""><br tabindex="386"></br><noscript hidden=""></noscript></s><audio dir="ltr"></audio><u contenteditable="true"></u><output contenteditable="true">Votu wiuhimo susde.<input readonly="" type="radio"></input><abbr tabindex="562"></abbr><del hidden=""></del></output><strong hidden=""><textarea disabled=""></textarea></strong></canvas></bdi><video draggable="true">Uw leorusi nase gozzod.</video>Ucrakime udzupduc.<noscript hidden=""><sub hidden=""></sub></noscript></s><datalist draggable="true"><option draggable="false"></option></datalist>Owsojwa lirhu mi mi zadup vigmelcu nubuz.</form>',
        '<form contenteditable=""><th dir="auto" scope="col"><q contenteditable="false"><audio draggable="true"></audio></q><textarea autocomplete="on"></textarea></th><audio hidden=""><dfn dir="auto"><samp draggable="true"><picture dir="ltr"></picture></samp></dfn>Ozi tukovrad lo uzlilez sucbija er usurisosu.</audio><q dir="ltr">Ir cegbopi pevrunit fibzo wuffob.<dfn dir="rtl"><noscript draggable="true"><em draggable="false"><area hidden=""></area></em><svg dir="ltr"><data contenteditable="true"></data></svg><strong contenteditable="true"></strong><u contenteditable="false">Fofbuke badil ijpe baporpu lab.<ins tabindex="84"></ins><map tabindex="-537"></map></u></noscript>Zem zabha iviracnem delab.<iframe dir="auto" title="yNir"></iframe></dfn></q>Loppa winsin je tonli subafe.Efju iv ra.</form>',
        '<form autocomplete="off"><h6 hidden=""><noscript dir="auto"><select disabled=""><optgroup disabled=""><option contenteditable="true"></option><script dir="rtl"></script></optgroup><option selected=""></option><script defer=""><embed draggable="false" src="zh&amp;!93)Ej" title="*pnCe&amp;21Qd!5k96"></embed><object tabindex="-825"></object><picture dir="rtl"></picture><math overflow="scroll"></math></script><script crossorigin="anonymous"><blockquote draggable="false"></blockquote><object hidden=""></object><h6 tabindex="-384"></h6><label tabindex="-624"></label></script></select><bdo tabindex="-628">Zunudo hos gi pusdudev seama.<template dir="rtl"><nav draggable="true"></nav><object data="RqDFIv(Tl^RkLhTsb1#"></object><object hidden=""></object><object tabindex="23"></object></template></bdo></noscript><map hidden=""><audio preload="auto"><button draggable="false" type="submit"><picture hidden=""></picture><area draggable="true"></area><code draggable="false"></code></button><embed src="zJ2^HRq" title="ksnQKmFc^"></embed><link integrity="UqapXMn[)HlP" href="N]nLwSweD3Fp7%zpIo"></link><article dir="rtl"><aside contenteditable=""></aside><ruby tabindex="-947"></ruby><label dir="auto"></label><ins draggable="false"></ins><math dir="rtl"></math></article><picture hidden=""><source dir="ltr"></source><script async=""></script></picture></audio>An vig agwoveze fekkubo gub.Sok itokelen.</map><small dir="auto"><small tabindex="764"></small><kbd tabindex="487"><cite contenteditable="true"><br tabindex="498"></br><canvas draggable="true"></canvas>Gabfejus sopan mijpibfu cazeceh.Wohsul owapeg jan elsajzic.<meter contenteditable="true"></meter></cite><abbr draggable="false"><label tabindex="-5"></label>Aw aznifru wotvoreze teububar.Ginohdo guukalo elrubon racu kisciam.Kopikohib ubagij aculadib tijuk merohac.</abbr>Juwe jaubi mo oz.<samp hidden=""><ins tabindex="945"></ins></samp><del hidden=""><wbr dir="ltr"></wbr>Bazuj tuimsum mi.<sup draggable="false"></sup>Nepzisu divje.<math hidden=""></math></del></kbd>Ebuvuwah lawo.</small>Cufvu eci.</h6><th hidden="" scope="rowgroup"><meter hidden=""><svg hidden="">Aba hofatesi ge kun.<slot contenteditable="">Jo muv tazat voohwo sij cav.<select size="974"></select></slot><canvas hidden=""><math draggable="true"></math><abbr hidden=""></abbr><audio contenteditable="true"></audio></canvas><title draggable="false"></title><template contenteditable="true"><math contenteditable=""></math><samp tabindex="-31"></samp>Epmoguh isze ep runifaf zanumbot bu tatpasa.<base hidden=""></base><data draggable="false"></data></template></svg>Coken kufaco puwep.Otuwidag sab tekis kam ijbu me.Gorafava dowsucom.<sup hidden=""><script crossorigin="use-credentials"><input contenteditable="true" type="email"></input>Ip ul gutva raveh ulogihak.<button dir="ltr" type="button"></button><b tabindex="727"></b></script><span draggable="false"><small tabindex="579"></small><area tabindex="-487"></area></span><sub draggable="false"><del tabindex="236"></del><dfn draggable="false"></dfn><code hidden=""></code><label tabindex="181"></label></sub>Hamin lonfo.<noscript dir="auto"><ruby draggable="true"></ruby><picture dir="rtl"></picture></noscript></sup></meter><progress tabindex="-442"><i tabindex="-431"><var dir="ltr"><abbr draggable="true"></abbr><iframe tabindex="446" title="PpNict]ejNr*dcVjqH"></iframe></var></i></progress><table dir="ltr"><template draggable="false"><audio hidden=""><iframe dir="ltr" title="o2Xm)ng2XlGr#)"></iframe><button autofocus="" type="button"></button><canvas dir="auto"></canvas></audio><meta dir="rtl"></meta><svg tabindex="571"></svg><img src="^YSp*W9DXWQhzWl]"></img></template><caption dir="auto"><svg dir="auto"><select hidden=""></select><template draggable="false"></template><template dir="rtl"></template><svg dir="rtl"></svg></svg><b dir="rtl">So tos livpul.<keygen contenteditable="false"></keygen></b>Fe hilmom wozbufbu izvu.Ol date veami doweg.<h6 draggable="false"></h6></caption><tfoot contenteditable=""><template hidden=""><picture contenteditable=""></picture></template><tr draggable="true"></tr><template tabindex="373">Hoftakew ligzewu vodopni feevi dab.<base hidden=""></base><sub hidden=""></sub></template><script defer=""><output contenteditable="true"></output></script></tfoot></table></th>So niwobuj dos igoja sakle tapu ace.<dl draggable="true"><div draggable="true"><dd tabindex="-662"><iframe src="Z3om" title="FH83azwX"></iframe><article tabindex="-234">Hurdogas suzarba je dehim mel imaalisuk oka.<samp tabindex="381"></samp></article><b tabindex="806"><sub tabindex="573"></sub><ins draggable="true"></ins>Sid zufpu fojci fez zud kumnec bebsojla.<data hidden=""></data></b></dd></div><script draggable="true"><template dir="auto">Javoti hughef.<audio hidden=""><blockquote draggable="false"></blockquote><article dir="rtl"></article><section tabindex="-734"></section></audio></template><object contenteditable=""><img draggable="false" src="koNTpxa9rU[o7e)d"></img><h1 contenteditable=""><mark contenteditable=""></mark>Tit mulaz ocvewaka.Obe nupvenog cimfas.</h1></object></script><script async="">Vatdaom liujzup.<audio dir="rtl"><h1 hidden="">Hozvede zaumi uho.<abbr dir="rtl"></abbr>Supup dadu.<template dir="ltr"></template></h1></audio></script><div draggable="false"><dt tabindex="-240"></dt><dt contenteditable="true"><wbr hidden=""></wbr><strong draggable="false"><noscript draggable="true"></noscript>Vo ufi.Kok somjan dun zidni hos.<meter tabindex="-99"></meter><del tabindex="204"></del></strong><td colspan="815"><h3 hidden=""></h3><mark tabindex="11"></mark><a hidden=""></a></td>Fuh pudli zuffep vabo go mipip.<div contenteditable=""><ruby draggable="false"></ruby><dt contenteditable="false"></dt><kbd hidden=""></kbd></div></dt></div><dd contenteditable="false"><video tabindex="520">Ha wozoho to.<i hidden=""><ins tabindex="384"></ins></i></video>Giuj wa seroho huhuel ak podcas ikwasfe.</dd></dl>Mo nubjaja he hugzies fi.</form>',
        '<form contenteditable=""></form>'
      ]);
    });
  });
});
